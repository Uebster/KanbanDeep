/* static/kanban.css (Com o novo estilo inspirado na imagem) */

/* ===== ESTILOS GLOBAIS E VARIÁVEIS ===== */
/* ===== RESET E TEMA CLARO ===== */
body {
    height: 100vh;
    overflow: hidden;
}

/* ===== LAYOUT PRINCIPAL DA APLICAÇÃO ===== */
#app { display: flex; flex-direction: column; height: 100vh; width: 100%; }

/* Menu Horizontal */
.horizontal-menu .dropdown {
    /* Garante que o menu central sempre se posicione corretamente */
    width: max-content;
    left: 50%;
    right: auto; /* Anula qualquer regra de 'right' herdada */
    transform: translateX(-50%);
    /* Adiciona os estilos do dropdown padrão */
    background-color: var(--bg-card);
    border: 1px solid var(--primary);
    border-radius: 8px;
    padding: 8px;
    box-shadow: 0 0 15px rgba(var(--primary-rgb), 0.7), 0 0 25px rgba(var(--primary-rgb), 0.5);
}
.horizontal-menu .dropdown.show { display: flex; flex-direction: row; gap: 10px; align-items: center; }
.horizontal-menu .dropdown button {
    width: auto; margin: 0 5px; transform: scale(1.1);
}

/* Esconde o select nativo, pois o ui-controls.js cria uma versão customizada */
.custom-select select {
    display: none;
}
.horizontal-menu .custom-select {
    min-width: 250px;
}


/* Estilos para o filtro de quadros Pessoal/Grupo */
#board-filter-toggle {
    display: flex;
    background-color: var(--bg-card);
    border-radius: 6px;
    padding: 4px;
}

.filter-btn {
    flex: 1;
    padding: 6px 12px;
    border: none;
    background-color: transparent;
    color: var(--text-muted);
    cursor: pointer;
    border-radius: 4px;
    font-weight: 500;
    transition: all 0.2s ease;
}
.filter-btn:hover { 
            background-color: rgba(var(--primary-rgb), 0.2);
            box-shadow: 0 0 6px rgba(var(--primary-rgb), 0.1), 0 0 8px rgba(var(--primary-rgb), 0.2);
            color: var(--primary);
        }
.filter-btn.active {            background-color: rgba(var(--primary-rgb), 0.2);
            box-shadow: 0 0 6px rgba(var(--primary-rgb), 0.1), 0 0 8px rgba(var(--primary-rgb), 0.2);
            color: var(--primary);
            border: 1px solid rgba(var(--primary-rgb), 0.8);
}

/* ===== ÁREA PRINCIPAL DO KANBAN ===== */
#main-area {
    flex-grow: 1; padding: 25px; display: flex; flex-direction: column;
    overflow: hidden;
}
#kanban-title {
    margin-bottom: 25px;
    text-align: center;
    font-size: 2rem;
    font-weight: 500;
    display: flex; /* Adicionado para alinhar ícone e texto */
    align-items: center;
    justify-content: center;
    gap: 10px;
}
.board-group-name {
    color: var(--text-muted);
    font-size: 0.8em;
    font-weight: 400;
}
#columns-container {
    display: flex; gap: 20px; overflow-x: auto;
    padding-bottom: 20px; flex-grow: 1;
}

/* ===== NOVO ESTILO DAS COLUNAS (INSPIRADO NA IMAGEM) ===== */
.column {
    width: 450px;
    min-width: 300px;
    display: flex;
    flex-direction: column;
    display: flex;
    color: var(--text);
    border-radius: 8px;
    border: 3px solid var(--border-light);
    background-color: var(--bg-column); /* Cor de fundo base da coluna */
    max-height: 100%;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}

.column-header {
    padding: 12px 15px;
    cursor: grab;
    background-color: var(--bg-column-header); /* Cabeçalho cinza escuro */
    border-radius: 6px 6px 0 0; /* Arredonda cantos superiores */
    text-align: center;
    font-size: 1.5rem;
    font-weight: 600; /* Um pouco mais forte */
    color: var(--column-text-color);
    border-bottom: 3px solid var(--border);
    display: flex; /* Adicionado para alinhar o botão de colar */
    justify-content: center;
    align-items: center;
    position: relative; /* Para posicionar o botão de colar */
}

/* CORREÇÃO: Garante que o título (h3) da coluna herde a cor customizada
   definida em .column-header, sobrescrevendo a regra global de h3. */
.column-header h3 {
    color: inherit;
    flex-grow: 1; /* Ocupa o espaço disponível */
}

/* Botão de colar cartão, agora posicionado à direita */
.paste-card-btn {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(255,255,255,0.1);
    border: 1px solid var(--border);
    color: var(--text-muted);
    border-radius: 50%;
    width: 28px;
    height: 28px;
    padding: 0;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.2s;
}
.paste-card-btn:hover {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
}

#columns-container {
  display: flex;
  gap: 20px;
  overflow-x: auto;
}


.cards-container {
    padding: 15px;
    flex-grow: 1;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 12px;
    /* A MÁGICA: A cor da coluna é aplicada aqui, na área dos cartões! */
    background-color: var(--column-color);
}

/* Botão de adicionar cartão */
.add-card-btn {
    display: block;
    width: 100%;
    padding: 12px;
    background-color: var(--bg-column-header); /* Mesma cor do header */
    border: none;
    border-top: 1px solid var(--border);
    color: var(--text-muted);
    font-size: 0.9rem;
    cursor: pointer;
    transition: background-color 0.2s;
    border-radius: 0 0 6px 6px; /* Arredonda cantos inferiores */
}
.add-card-btn:hover {
    background-color: var(--border);
    color: var(--text);
}

/* --- NOVO ESTILO DE CARTÃO DETALHADO E CORRETO --- */
.card {
    background-color: var(--bg-card); /* A cor de fundo será sobrescrita pelo JS se houver cor customizada */
    border: 2px solid var(--border); /* Borda mais grossa para combinar com a coluna */
    border-radius: 6px;
    cursor: grab;
    color: var(--text);
    box-shadow: 0 3px 6px rgba(0,0,0,0.2); /* Sombra mais pronunciada */
    position: relative; /* Essencial para o posicionamento absoluto dos filhos */
    padding-bottom: 30px; /* Espaço para o avatar no rodapé */
}

/* --- EFEITOS DE ARRASTAR E SOLTAR --- */

/* NOVO: Estilo para o "fantasma" customizado que segue o mouse. Este é o elemento que o usuário vê em movimento. */
.card-drag-ghost {
    position: fixed; /* Usa 'fixed' para flutuar sobre tudo, ignorando o scroll */
    pointer-events: none; /* Garante que o fantasma não interfira com eventos de drop */
    z-index: 9999; /* Fica acima de tudo */
    opacity: 0.8; /* Totalmente sólido, como no exemplo */
    /* A sombra épica que você queria: uma sombra escura suave + um brilho da cor primária */
    box-shadow: 0 0 15px rgba(var(--primary-rgb)), 0 0 25px rgba(var(--primary-rgb));
    margin: 0;
    /* A rotação foi removida para um visual mais limpo */
    transform: translate(-50%, -50%); /* Centraliza o fantasma no cursor */
    border: 2px solid var(--primary) !important;
}

/* NOVO: Estilo para o "fantasma" customizado que segue o mouse. Este é o elemento que o usuário vê em movimento. */
.column-drag-ghost {
    position: fixed; /* Usa 'fixed' para flutuar sobre tudo, ignorando o scroll */
    pointer-events: none; /* Garante que o fantasma não interfira com eventos de drop */
    z-index: 9999; /* Fica acima de tudo */
    opacity: 0.8; /* Aplica 80% de opacidade a toda a coluna fantasma */
    /* A sombra épica que você queria: uma sombra escura suave + um brilho da cor primária */
    box-shadow: 0 0 15px rgba(var(--primary-rgb)), 0 0 25px rgba(var(--primary-rgb));
    margin: 0;
    max-height: 80vh; /* Impede que a coluna se achate ou fique gigante */
    transform: translate(-50%,-3%); /* Centraliza o fantasma no cursor */
    border: 2px solid var(--primary) !important;
    overflow: hidden; /* Garante que o conteúdo não vaze do max-height */
}

/* Garante que o header e o footer do fantasma tenham um fundo sólido antes da opacidade ser aplicada */
.column-drag-ghost .column-header,
.column-drag-ghost .add-card-btn {
    background-color: var(--bg-card); /* Usa uma cor de fundo sólida e consistente */
    color: var(--text); /* Garante que o texto seja visível */
}


/* Estilo para o placeholder que fica no lugar original do cartão (o que você gostou). */
.card.dragging {
    /* Deixa o original semitransparente com borda tracejada */
    opacity: 0.4;
    border: 2px solid var(--primary) !important;
}

.column.dragging {
    opacity: 0.4;
    border: 2px solid var(--primary) !important;
}

/* Estilo para a coluna quando um cartão está sendo arrastado sobre ela */
.column.drag-over .cards-container {
    opacity: 0.4;
    box-shadow: 0 0 15px rgba(var(--primary-rgb)), 0 0 25px rgba(var(--primary-rgb));
    offset: 4px;
}

/* NOVO: Estilo de sombra para a coluna que será movida */
.column.drop-shadow {
    box-shadow: 0 0 25px rgba(var(--primary-rgb));
    border-color: var(--primary);
}

/* O conteúdo agora tem seu próprio padding e posicionamento */
.card-content {
    position: relative;
    padding: 30px 15px 15px 15px; /* Mais padding no topo para data e status */
}

.card:hover {
    border-color: var(--primary);
    transform: scale(1.01);
}

.card-title {
    font-weight: 500;
    font-size: 1.3rem;
    margin: 0;
    /* word-wrap já é o padrão, mas break-word garante que não quebre o layout */
    word-wrap: break-word;
    text-align: center;
}

/* --- Novos Elementos Visuais --- */
.card-header-details {
    position: absolute;
    top: 8px; /* Distância do topo */
    left: 15px;
}

.card-status-container {
    position: absolute;
    top: 8px;
    right: 15px;
}

.card-hover-info {
    /* Adiciona o espaçamento que faltava */
    padding: 10px 15px 5px 15px;
    font-size: 0.85rem;
    color: inherit; /* Herda a cor do texto do cartão */
    opacity: 0.8; /* Deixa um pouco mais sutil que o título */
}
.card-hover-info p {
    margin: 0 0 5px 0;
    text-align: left; /* Alinha os detalhes à esquerda */
    color: inherit;
}
.card-hover-info p strong {
    color: inherit; /* Garante que o negrito também herde a cor customizada do cartão */
    opacity: 1; /* Faz o label (ex: "Criador:") ter um pouco mais de destaque */
}

.card-footer-details {
    position: absolute;
    bottom: 8px;
    right: 10px;
}

.card-due-date-display {
    font-size: 0.8rem;
    color: inherit; /* Herda a cor do texto do cartão */
    opacity: 0.8; /* Deixa um pouco mais sutil que o título */
}

.card-status-box {
    width: 16px;
    height: 16px;
    background-color: #3c3c3c;
    border: 2px solid #666;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary); /* Cor do 'check' */
    font-weight: bold;
    font-size: 14px; /* Tamanho do 'check' */
    line-height: 1; /* Alinha o 'check' verticalmente */
}

.card-assignee-avatar {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    object-fit: cover;
    border: 1px solid var(--border-light);
    /* Para o avatar de iniciais */
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 0.8rem;
    font-weight: bold;
    color: white;
    flex-shrink: 0; /* Impede que o avatar encolha */
}

.card-tag-line { height: 9px; border: 2px solid #777; border-radius: 3px; margin-top: 8px; }

.form-group input[type="color"] { padding: 5px; height: 45px; }

/* --- NOVO: ESTILOS DO TOOLTIP --- */
.card-tooltip {
    position: fixed;
    background-color: var(--bg-card);
    border: 1px solid var(--primary);
    border-radius: 8px;
    padding: 15px;
    z-index: 10000;
    max-width: 320px;
    box-shadow: 0 5px 25px rgba(0, 0, 0, 0.5);
    pointer-events: none; /* Impede que o tooltip intercepte eventos do mouse */
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 0.2s ease, transform 0.2s ease;
}

.card-tooltip.visible {
    opacity: 1;
    transform: translateY(0);
}

.tooltip-title {
    font-weight: bold;
    margin-bottom: 10px;
    color: var(--primary);
    border-bottom: 1px solid var(--border);
    padding-bottom: 8px;
    font-size: 1.1rem;
}

.tooltip-details p {
    margin: 6px 0;
    font-size: 0.9rem;
    color: var(--text-muted);
}

.tooltip-details strong { color: var(--text); }

/* --- NOVO: ESTILOS DO TOUR GUIADO --- */
.tour-highlight {
    position: relative;
    z-index: 9999; /* Acima do overlay */
    /* box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.6); <-- REMOVIDO para evitar flash */
    border-radius: 4px; /* Um pequeno arredondamento para o destaque */
    /* NOVO: Borda para dar mais ênfase ao elemento destacado */
    outline: 2px solid var(--primary);
    outline-offset: 4px; /* Offset padrão para a borda de destaque */
}

#tour-overlay {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    z-index: 9998;
}

#tour-popover {
    position: absolute;
    background-color: var(--bg-card);
    border: 1px solid var(--primary);
    border-radius: 8px;
    padding: 20px;
    z-index: 10000;
    max-width: 350px;
    box-shadow: 0 5px 25px rgba(0,0,0,0.5);
    transition: opacity 0.3s, transform 0.3s;
}

#tour-popover.hidden {
    display: none;
}

.tour-title {
    font-size: 1.2rem;
    font-weight: bold;
    color: var(--primary);
    margin-bottom: 10px;
}

.tour-text {
    font-size: 0.95rem;
    line-height: 1.5;
    margin-bottom: 20px;
}

.tour-nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-top: 1px solid var(--border);
    padding-top: 15px;
}

#tour-step-counter {
    font-size: 0.9rem;
    color: var(--text-muted);
}

/* Seta do popover */
.tour-arrow {
    position: absolute;
    width: 0;
    height: 0;
    border-style: solid;
    display: none; /* REMOVIDO: A seta não estava se comportando bem em todas as posições. */
}

.tour-arrow.top { border-width: 0 8px 8px 8px; border-color: transparent transparent var(--primary) transparent; top: -8px; left: 50%; transform: translateX(-50%); }
.tour-arrow.bottom { border-width: 8px 8px 0 8px; border-color: var(--primary) transparent transparent transparent; bottom: -8px; left: 50%; transform: translateX(-50%); }
.tour-arrow.left { border-width: 8px 8px 8px 0; border-color: transparent var(--primary) transparent transparent; left: -8px; top: 50%; transform: translateY(-50%); }
.tour-arrow.right { border-width: 8px 0 8px 8px; border-color: transparent transparent transparent var(--primary); right: -8px; top: 50%; transform: translateY(-50%); }

/* Em kanban.css */

/* Estilos para a busca de usuários */
#user-search-dialog {
    width: 400px;
    max-width: 90vw;
    border-radius: 8px;
    border: none;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.user-result-item:hover {
    background-color: var(--bg-page);
}

#user-search-input {
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 14px;
}

#user-search-results {
    border: 1px solid #ddd;
    border-radius: 4px;
    max-height: 300px;
    overflow-y: auto;
}

#user-search-input {
    width: 100%; padding: 8px; margin-bottom: 15px;
    background-color: var(--bg-page);
    color: var(--text);
}

#preferences-dialog {
    max-width: 850px;
}

/* Layout do diálogo de preferências */
.preferences-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 25px;
}

.preferences-column {
    display: flex;
    flex-direction: column;
}

fieldset.form-group {
    border: 1px solid var(--border);
    padding: 15px;
    border-radius: 6px;
    margin-bottom: 15px;
}

fieldset.form-group legend {
    padding: 0 10px;
    font-weight: 500;
    color: var(--text-muted);
}

fieldset.form-group label {
    display: block;
    margin: 8px 0;
}

.no-boards-message {
    padding: 10px;
    color: var(--text-muted);
    text-align: center;
    font-style: italic;
    min-width: 250px; /* Garante a mesma largura mínima do seletor de quadros */
    /* CORREÇÃO DEFINITIVA: Faz o placeholder ter o mesmo "box model" do select */
    padding: 12px; /* Mesmo padding do .select-selected */
    border: 1px solid transparent; /* Mesma borda */
    border-radius: 6px; /* Mesmo border-radius */
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Adiciona espaçamento vertical para os botões de adicionar coluna/etiqueta nos diálogos */
#add-group-board-column-btn,
#add-group-tag-btn {
    margin-top: 8px;
}

/* ===== NOVO: ESTILOS PARA O DIÁLOGO GERENCIADOR ===== */
#manager-dialog {
    max-width: 800px; /* Aumentado para dar mais espaço */
    width: 90%;
}

/* USA O PADRÃO .showcase-navbar de universal.css */
.manager-tabs {
    /* Reutiliza o estilo da navbar principal para consistência */
    margin-bottom: 20px; /* Adiciona um espaçamento abaixo das abas */
}

.manager-tab-content {
    display: none;
}

.manager-tab-content.active {
    display: block;
}

.manager-item-list {
    max-height: 45vh; /* Aumentado para mais espaço vertical */
    min-height: 200px; /* Garante uma altura mínima para o diálogo não encolher */
    overflow-y: auto;
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 10px;
}

.manager-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px;
    border-radius: 4px;
}
.manager-item:not(:last-child) {
    border-bottom: 1px solid var(--border-light);
}
.manager-item-title { flex-grow: 1; }
.manager-item-actions { display: flex; gap: 8px; }

.manager-list-heading {
    font-size: 0.9rem;
    font-weight: bold;
    color: var(--text-muted);
    text-transform: uppercase;
    padding: 15px 10px 5px 10px;
    border-bottom: 1px solid var(--border);
    margin-bottom: 5px;
}

.manager-list-placeholder {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    color: var(--text-muted);
    font-style: italic;
}